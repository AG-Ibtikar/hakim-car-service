datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model ServiceRequest {
  id            String    @id @default(uuid())
  userId        String
  vehicleId     String?
  serviceType   ServiceCategory
  location      Json
  description   String?
  status        ServiceRequestStatus @default(PENDING)
  estimatedCost Float?
  scheduledTime DateTime?
  customerName  String
  customerPhone String
  vehicleType   String
  make          String
  model         String
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  user          User      @relation(fields: [userId], references: [id])
  vehicle       Vehicle?  @relation(fields: [vehicleId], references: [id])

  @@map("service_requests")
}

model User {
  id              String           @id @default(uuid())
  email           String           @unique
  name            String?
  password        String
  serviceRequests ServiceRequest[]
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt

  @@map("users")
}

model Vehicle {
  id              String           @id @default(uuid())
  type            String
  make            String
  model           String
  year            Int?
  serviceRequests ServiceRequest[]
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt

  @@map("vehicles")
}

enum ServiceCategory {
  EMERGENCY
  TOW
  MAINTENANCE
  REPAIR
  DIAGNOSTIC
  CLEANING
  TIRE_SERVICE
  OTHER
}

enum ServiceRequestStatus {
  PENDING
  CONFIRMED
  IN_PROGRESS
  COMPLETED
  CANCELLED
} 